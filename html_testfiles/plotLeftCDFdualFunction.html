<!DOCTYPE html>
<meta charset="utf-8">
<style>
	.chart div {
		font: 10px sans-serif;
		background-color: steelblue;
		text-align: right;
		padding: 3px;
		margin: 1px;
		color: white;
	}

</style>
<div class="chart"></div>
test-File
<script src="../js/ext_libs/d3.js"></script>
<script src="../js/libs/math2.js"></script>
<script src="../js/libs/mask.js"></script>
<script src="../js/libs/matrixOperations.js"></script>
<script src="../js/htmlElementFunctions2.js"></script>
<script src="../js/libs/pointEvaluation.js"></script>
<script src="../js/libs/gauss2.js"></script>
<!-- load http://maurizzzio.github.io/function-plot/ -->
<script src="../js/ext_libs/function-plot.js"></script>
<script src="../js/ext_libs/numeric-1.2.6.js"></script>
<body>
	<div id="plot1"> </div>
	<div id="plot2"> </div>
	<div id="plot3"> </div>
</body>

<script>
	
	
	
//werte fuer die plot-Instancen
values1=0;
values2=0;
values3=0;


/** Compute the values of the left dual CDF-scaling-function.
 *   Reference:
 *		[1] M. Primbs, Stabile biorthogonale Spline-Waveletbasen auf dem Intervall,
 *      Dissertation, 2006, S.71 - 72
 *  (last modification: 26.11.16 Simon)
 * 
 *  @param{int}	   i 					number of the left scaling-function
 *  									counted from right to left
 *  									i = 0, ... , d_tilde - 1
 *  									(interval end to interval beginning).
 *  @param{int}		d					first CDF-parameter
 *  @param{int}    d_tilde				second CDF-parameter.
 * 
 * 	@return{Array} values2				values of left dual CDF-scaling-function
 * 										
 */


function calculateLeftDualCDFPointValues(i,d, d_tilde) {
	//generate coefficients of dual B-Spline functions
	var coef =  genDualBSplineCoeffs(d, d_tilde);
	//calculate values of dual B-Spline functions
	var values1 = iterativePointEvaluation2(coef[0], coef[1], 9, 0);
	var delta = values1[1][0]-values1[0][0];
	var supp = d+2*d_tilde-3-i; //see p.71
	console.log("supp", supp);
	
	//calculate left and right support of dual B-Spline function
	var l_1=-Math.floor(d/2)-d_tilde+1;
	var l_2=Math.ceil(d/2)+d_tilde-1;
	
	//initial new Array for new border-function values	
	var values2 = createArray(supp/delta + 1,2);
	for(var j=0;j<values2.length;j++){
		values2[j][0] = j*delta;
		values2[j][1] = 0;
		
		if(values2[j][0]<0){
			values2[j][1] =0;
			console.log("errror");
		}
		else{
			for(var n=i; n<l_2-l_1-1;n++){
				values2[j][1] += nchoosek(n,i) * findValue(values1,values2[j][0] + n + l_1 + 1);//hier richtiger Index...
			}
		}
	}
	console.log(values2);
	return values2;
}

/** For input function-values given in a aequidistant grid, this method finds the corresponding y-value of 
 *	the x-value. x values not given in the input values, are supposed to be 0
 * 
 *  (last modification: 23.1.16 Simon)
 * 
 *  @param{values}	   values 			input values (of the function)
 *  @param{double}		x				x, whose y-value is searched
 * 
 * 	@return{Array} 		y				y-value
 * 										
 */

function findValue(values,x){
		var delta = values[1][0]-values[0][0];
		var index = Math.round((x-values[0][0])/delta);
		if(index<0||index>=values.length){
			return 0;
		}
		if(Math.abs(values[index][0]-x)>delta){
			console.log("alles falsch");
			return undefined;
		}
		if(Math.abs(values[index][0]-x)>0.0001){
			//console.log("values approximated, error =", Math.abs(values[index][0]-x) );
		}
		if(index>=0&&index<values.length){
			return values[index][1];
		}
		else{
			//console.log("values out of definition-area were used");
			return 0;
		}
	}

//version with bad performance of the upper function
function findValue2(values,x){
	for(var i=0; i<values.length; i++){
		if(x==values[i][0]){
			return values[i][1];
		}
	}
	return 0;
}

//Plot hier: 0 1 2 3 4 5
//Plot Prim: 6 5 4 3 2 -
values2=calculateLeftDualCDFPointValues(1,3,5);

	
	// a general function to create a plot-instances
	function makePlotInst(target, values){
		try{ 
			plotInst = functionPlot({
			target : target,
			data : [{
				points : values,
				fnType : 'points',
				graphType : 'polyline',
			}]
		});
	
			//return the wavelet plot as object
			return plotInst;
				
			}catch (err) {
				console.log(err);
				alert(err);
			}
	}
	
	makePlotInst('#plot1', values1);		
	makePlotInst('#plot2', values2);		
	makePlotInst('#plot3', values3);		

</script>
