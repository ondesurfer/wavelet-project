<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>New Web Project</title>
	
		 <script src="sql.js"></script>
		 <script src="d3.js"></script>
		<script src="math.js"></script>
		<script src="math2.js"></script>
		<script src="mask.js"></script>
		<script src="matrixOperations.js"></script>
		<script src="pointEvaluation.js"></script>
		<script src="pointEvaluation2.js"></script>
		<script src="function-plot.js"></script>
		<script src="numeric-1.2.6.js"></script>
		<script src="gauss2.js"></script> 
		<script src="htmlElementFunctions.js"></script>
		<script src="dbMethods.js"></script>
		
	</head>
	

<body bgcolor="#FFFFFF" style="width: 849px; height: 555px;">
<h1>wavelet project</h1>
<div style="border: medium #000000 groove; width: 382px; height: 543px; background-color: #00FFFF">
	<form method="post">
		Choose your conditions:</form>
	<form method="post" style="width: 171px; height: 79px">
		orthogonal Translations<br />
		<select id="select1" name="orthogonal_translations =" style="width: 147px; height: 30px">
		<option selected="selected" value="-2">Show all</option>
		<option value="0">no</option>
		<option value="1">yes</option>
		</select><br />
		</form>
	<form method="post" style="width: 177px">
		symmetry<br />
		<select id="select2" name="symmetry =" style="width: 94px">
		<option selected="selected" value="-2">Show all</option>
		<option value="'odd'">odd</option>
		<option value="'even'">even</option>
		</select><br />
	</form>
	<form method="post" style="width: 373px; color: #000000" id="form1">
		<input checked="checked" name="exactness_of_polynomial_approximation &gt;=" type="text" value="0" id="input1" /> Exactness of 
	polynomial approximation.<br />
		(Enter 0 if you do not care about it.)<br />
	</form>
	<form method="post" id="form2">
		<input name="critical_Hoelder_exponent &gt;=" type="text" value="0" id="input2" />&nbsp; critical HÃ¶lder 
		exponent.<br />
		(Enter 0 if you do not care about it.)<br />
	</form>
	<form method="post" id="form3">
		<input name="critical_Sobolev_exponent &gt;=" type="text" value="0" id="input3" /> critical Sobolev exponent.<br />
		(Enter 0 if you do not care about it.)<br />
	</form>
	<form action="" method="post" style="width: 324px" id="form4">
	spline order<br />
		<input id="input4" name="spline_order &gt;=" type="text" value="-1" /><br />
		(Enter -2 if you do not care about it.)</form>
		
	<form method="post" style="width: 271px">
	<input name="Button4" type="button" value="show scaling functions in list" id="input7" /></form>

</div>

<div style="width: 394px; position: relative; left: 413px; top: -510px; height: 499px; background-color: #FF0000; border: medium #000000 groove">
	<form action="" method="post" style="height: 363px; outline-color: #000000">
		Scalingfunctions complying the conditions:<select name="Select1" style="width: 384px; height: 58px; empty-cells: show" id="select3">
		<option> </option>
		</select><input id="input5" name="Button1" style="width: 120px; height: 51px" type="button" value="show information" /><input id="input6" name="Button2" style="width: 124px; height: 50px" type="button" value="plot scaling function" /><textarea id="textarea1" name="TextArea1" style="width: 241px; height: 121px"></textarea></form>
</div>
<div id="plot1"> </div>



	<script>
		var values;	
		var plotInstance;
		
		//loads the database. (See dbMethods.js)
		loadDB();
		//links the Html elements to their functions. (See htmlElementFunctions.js)
		setHtmlFunctions();
		
		
		//add the draw-function to the draw-button
		document.getElementById('input6').onclick = function(event) {
				event.preventDefault();
				//draw once and save the graph as object
				plotInstance = draw();
				plotInstance.on("during:draw", zoomFilter);
			};

		
/** builds an functionPlot object an so draws an graph of the function
 *  (last modification: 1.7.16 Simon)
 * 
 * 	@return{functionPlot} object  instance of an functionPlot object
 */		
		function draw() {			
					try{ 
						
						var c=getCoeffs(document.getElementById('select3').value);
						var c_start=0;
						var N_0=10;
						var mu=0;
						values = iterativePointEvaluation2(c, c_start, N_0, 
							mu);
						
						var plotInst = functionPlot({
							target : '#plot1',
							data : [{
								//uses the filter function from pointEvaluation.js
								points : filter(-100,+100,values,700),
								fnType : 'points',
								graphType : 'polyline',
							}]
						});
					
					//return the wavelet plot as object
					return plotInst;
					
				}catch (err) {
					console.log(err);
					alert(err);
				}
		}

		
//	this function must be invoked by a FunctionPlot object	
// 	the idea is to invoke it during a zoom (e.g. plotInstance.on("during:draw", zoomFilter) )
//	so that not a few necessary points must be plotted
		function zoomFilter(){
				var xDomain=this.options.xDomain;	
				var newPoints=filter(xDomain[0],xDomain[1],values,700);
				console.log("hallo");
				if(newPoints==undefined){
					alert("No more detailled points available. Please zoom out.");
				}else{		
        			this.options.data[0].points= newPoints;
        			console.log("newPoints",newPoints);
        		}  		
   			}
		
	/** returns the coefficients of the scalingfunction as an array of numbers 
 * which were stored as one String in the database
 *  (last modification: 1.7.16 Simon)
 * 
 *	@param{integer} idOfScf 	id of the scalingfunction
 * 
 * 	@return{array} array  Array containing scalingfunction-coefficients
 */			
		function getCoeffs(idOfScf){
			var coeffsAsString = db.exec("SELECT mask FROM ScalingFunctionsSupp WHERE id="+idOfScf)[0].values[0][0];		
			return stringToNoArray(coeffsAsString);
		}
		
		
/** Converts a String of the form "1; 2; 3; 4" to an array as [1;2;3;4].
 * 	warning: there is no test if the input is right. The input format must be "1.23; 4.56; ... ; 7.89"
 *  (last modification: 1.7.16 Simon)
 * 
 *	@param{String} coeffsAsString  	String only containing numbers an ";"
 * 
 * 	@return{array} array  Array containing the numbers
 */

	function stringToNoArray(coeffsAsString){
		try{
			var str="";
			var array=new Array();
			for(i=0; i<coeffsAsString.length; i++){
				
				if(coeffsAsString.charAt(i)==";"){
					var number=parseFloat(str.trim());
					array.push(number);
					str="";
				}
				else{
					str=str+coeffsAsString.charAt(i);
				}
			}
						
			var number=parseFloat(str.trim());
			array.push(number);
			console.log(array);
			return array;
		}
		catch(err){
			console.log(err.message);
		}
	}
		
			
		//Ausgabe zu Kontrolle. Achtung: Diese muss etwas verzoegert stattfinden, da sonst die variablen db und contents noch nicht ueberschrieben sind.
		//setTimeout(function(){console.log(contents,db);},2000);
	
		</script>
		
		
	</body>
</html>

