<!DOCTYPE html>
<meta charset="utf-8">

<script src="../js/ext_libs/d3.js"></script>
<script src="../js/ext_libs/sql.js"></script>
<script src="../js/ext_libs/function-plot-1-17-3.js"></script>
<script src="../js/ext_libs/numeric-1.2.6.js"></script>
<script src="../js/ext_libs/jquery-3.1.0.min.js"></script>

<script src="../js/libs/matrixOperations.js"></script>
<script src="../js/libs/math2.js"></script>
<script src="../js/libs/plotFeatures.js"></script>
<script src="../js/libs/functionTypes/daubechiesWavelets.js"></script>
<script src="../js/libs/dbMethods.js"></script>

<body>
	<h2>Plot of Daubechies Wavelet</h2>
	<h4>Select your wavelet-system</h4>
	<select id="select-wavelet-system"></select>
	<input id="button-plot" type="submit" value="PLOT">
	<div id="plot7"></div>

</body>

<script>
	//checks if database is loaded (and loads it if necessary). Than invokes the function 'buildFunctions'.
	checkDB('wavelet-systems.sqlite',buildFunctions);

	function buildFunctions() {
		var infos = (db.exec("SELECT name, mask FROM DAUBECHIES")[0].values);
		console.log(infos);
		console.log("parsed", JSON.parse(infos[0][1]));
		//	var dualMask = JSON.parse(db.exec("SELECT mask FROM " + table + " WHERE id = " + dualID)[0].values[0][0])
		//adding all possible wavelet-systems to select menue
		for (var j = 0; j < infos.length; j++) {
			$('#select-wavelet-system').append($('<option>', {
				text : infos[j][0],
				value : infos[j][1],
			}));
		}
		//adding plot-function to submit-button
		$("#button-plot").on("click", function() {
			var mask = JSON.parse($('#select-wavelet-system').val());		
			//deliTrans= [deli,trans] - non-fix parameters for calculating values. Can be changed by user
			var deliTrans = [0,0];
			//params=mask, deriv, acc - fix parameters for calculating values of wavelet
			var params = [mask,0,14];
			buildPlot2("#plot7",valuesOfDaubechiesWav2,params,[0,4],[-5,5]);
		});

	}

</script>
